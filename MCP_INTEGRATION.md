# MCP (Model Context Protocol) Integration

## –û–±–∑–æ—Ä

–í –ø—Ä–æ–µ–∫—Ç –±—ã–ª –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω Model Context Protocol (MCP) - –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ —è–∑—ã–∫–æ–≤—ã–º –º–æ–¥–µ–ª—è–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Claude –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (McpModels.kt)

–°–æ–∑–¥–∞–Ω—ã data –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MCP –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º:
- `McpTool` - –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ MCP
- `McpToolCallResult` - —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `McpServerInfo` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ MCP —Å–µ—Ä–≤–µ—Ä–µ
- `JsonRpcRequest/Response` - –¥–ª—è JSON-RPC 2.0 –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `shared/src/commonMain/kotlin/com/claude/chat/data/model/McpModels.kt`

### 2. MCP –ö–ª–∏–µ–Ω—Ç

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å McpClient
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏:
- `initialize()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `listTools()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `callTool()` - –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- `listResources()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- `listPrompts()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `shared/src/commonMain/kotlin/com/claude/chat/data/mcp/McpClient.kt`

#### SimpleMcpClient
–ü—Ä–æ—Å—Ç–∞—è –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
1. `get_current_time` - –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
2. `calculate` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
3. `format_json` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å JSON –¥–∞–Ω–Ω—ã–µ
4. `count_words` - –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
5. `reverse_string` - –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É

–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `shared/src/commonMain/kotlin/com/claude/chat/data/mcp/SimpleMcpClient.kt`

### 3. McpManager

–ú–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MCP –∫–ª–∏–µ–Ω—Ç–∞–º–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏:
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç Claude API
- –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `shared/src/commonMain/kotlin/com/claude/chat/data/mcp/McpManager.kt`

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

#### ChatRepository
–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MCP:
- `initializeMcpTools()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `getAvailableMcpTools()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- `getMcpEnabled()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω –ª–∏ MCP
- `saveMcpEnabled()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è MCP

#### ChatRepositoryImpl
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º McpManager.

### 5. ViewModel –∏ UI

#### ChatViewModel
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `ChatUiState`:
  - `mcpEnabled: Boolean` - –≤–∫–ª—é—á–µ–Ω –ª–∏ MCP
  - `availableMcpTools: List<McpTool>` - —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

#### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (McpToolsList.kt)

–°–æ–∑–¥–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
- `McpToolsList` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç—å/–ø–æ–∫–∞–∑–∞—Ç—å
- `McpToolItem` - –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
- `McpToolsIndicator` - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ: `shared/src/commonMain/kotlin/com/claude/chat/presentation/ui/McpToolsList.kt`

### 6. –•—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–í `SettingsStorage` –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- `getMcpEnabled()` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ MCP
- `saveMcpEnabled()` - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ MCP

### 7. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å UUID:
```kotlin
implementation("com.benasher44:uuid:0.8.2")
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –í–∫–ª—é—á–µ–Ω–∏–µ MCP —á–µ—Ä–µ–∑ UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Settings** (–∏–∫–æ–Ω–∫–∞ —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ –≤ –≤–µ—Ä—Ö–Ω–µ–º –ø—Ä–∞–≤–æ–º —É–≥–ª—É)
2. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ —Å–µ–∫—Ü–∏–∏ **"MCP Tools"**
3. –í–∫–ª—é—á–∏—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å **"MCP Tools"**
4. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ —ç–∫—Ä–∞–Ω —á–∞—Ç–∞

–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

### 2. –ì–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

#### –í TopBar (—à–∞–ø–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:
```
Claude Chat  üîß 5 tools
```

#### –í —á–∞—Ç–µ
- **–ü—É—Å—Ç–æ–π —á–∞—Ç**: —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ —Å –∫–Ω–æ–ø–∫–æ–π Show/Hide
- **–° —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏**: —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω –≤–≤–µ—Ä—Ö—É —á–∞—Ç–∞ (–º–æ–∂–Ω–æ —Å–≤–µ—Ä–Ω—É—Ç—å)

–ö–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å:
- –ù–∞–∑–≤–∞–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `calculate`)
- –û–ø–∏—Å–∞–Ω–∏–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Perform basic arithmetic calculations")

### 3. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```kotlin
// –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
repository.saveMcpEnabled(true)

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏)
repository.initializeMcpTools()

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
val tools = repository.getAvailableMcpTools()
tools.forEach { tool ->
    println("Tool: ${tool.name}")
    println("Description: ${tool.description}")
}
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ChatScreen    ‚îÇ
‚îÇ   (UI Layer)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ChatViewModel  ‚îÇ
‚îÇ (Presentation)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ChatRepository  ‚îÇ
‚îÇ  (Data Layer)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   McpManager    ‚îÇ
‚îÇ (MCP Coordinator)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   McpClient     ‚îÇ
‚îÇ (SimpleMcpClient)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤ `SimpleMcpClient`:

```kotlin
// 1. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
private val builtInTools = listOf(
    // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    McpTool(
        name = "my_new_tool",
        description = "Description of my tool",
        inputSchema = buildJsonObject {
            put("type", "object")
            put("properties", buildJsonObject {
                put("param1", buildJsonObject {
                    put("type", "string")
                    put("description", "Parameter description")
                })
            })
            put("required", buildJsonArray {
                add("param1")
            })
        }
    )
)

// 2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—ã–∑–æ–≤–∞
override suspend fun callTool(name: String, arguments: Map<String, Any>): Result<McpToolCallResult> {
    return try {
        val result = when (name) {
            // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            "my_new_tool" -> executeMyNewTool(arguments["param1"] as? String ?: "")
            else -> // ...
        }
        Result.success(result)
    } catch (e: Exception) {
        // ...
    }
}

// 3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
private fun executeMyNewTool(param1: String): McpToolCallResult {
    // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∑–¥–µ—Å—å
    return McpToolCallResult(
        content = listOf(
            McpContent(
                type = "text",
                text = "Result: $param1"
            )
        ),
        isError = false
    )
}
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ MCP —Å–µ—Ä–≤–µ—Ä–∞

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–µ–º—É MCP —Å–µ—Ä–≤–µ—Ä—É –Ω—É–∂–Ω–æ:

1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é `McpClient` –¥–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ stdio –∏–ª–∏ SSE
2. –î–æ–±–∞–≤–∏—Ç—å –µ—ë –≤ `McpManager.initialize()`

```kotlin
class StdioMcpClient(
    private val command: String,
    private val args: List<String>
) : McpClient {
    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Process –∏ stdio
}

// –í McpManager
suspend fun initialize() {
    // –ü—Ä–æ—Å—Ç–æ–π –∫–ª–∏–µ–Ω—Ç
    val simpleClient = SimpleMcpClient()
    clients.add(simpleClient)

    // –í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä
    val externalClient = StdioMcpClient("node", listOf("server.js"))
    clients.add(externalClient)

    // ...
}
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude API** - –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å tools –≤ –∑–∞–ø—Ä–æ—Å—ã –∫ Claude
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ tool_use** - –∫–æ–≥–¥–∞ Claude —Ä–µ—à–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
3. **UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** - –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è MCP
4. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å stdio/SSE –∫–ª–∏–µ–Ω—Ç
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–∏—Ç—å unit –∏ integration —Ç–µ—Å—Ç—ã

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [MCP Specification](https://spec.modelcontextprotocol.io/)
- [Claude Tools API](https://docs.anthropic.com/claude/docs/tool-use)
- [MCP Servers List](https://github.com/modelcontextprotocol/servers)